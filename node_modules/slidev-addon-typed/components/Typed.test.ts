import { mount } from '@vue/test-utils';
import { describe, it, expect, beforeEach, vi } from 'vitest';
import Typed from './Typed.vue';

// Mock Typed.js
vi.mock('typed.js', () => {
  const MockedTyped = vi.fn().mockImplementation(() => ({
    start: vi.fn(),
    stop: vi.fn(),
    toggle: vi.fn(),
    reset: vi.fn(),
    destroy: vi.fn(),
  }));
  return { default: MockedTyped };
});

describe('Typed.vue', () => {
  beforeEach(() => {
    vi.clearAllMocks();
  });

  it('renders properly', () => {
    const wrapper = mount(Typed);
    expect(wrapper.find('.typed-text').exists()).toBe(true);
  });

  it('accepts string props', () => {
    const strings = ['Hello', 'World'];
    const wrapper = mount(Typed, {
      props: { strings }
    });
    expect(wrapper.props('strings')).toEqual(strings);
  });

  it('has correct default props', () => {
    const wrapper = mount(Typed);
    expect(wrapper.props('typeSpeed')).toBe(70);
    expect(wrapper.props('showCursor')).toBe(true);
    expect(wrapper.props('cursorChar')).toBe('|');
  });
});